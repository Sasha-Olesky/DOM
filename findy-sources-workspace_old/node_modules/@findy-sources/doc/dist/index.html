<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Findy Sources</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/custom.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Findy Sources</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> Findy Sources</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h3 id="introduction">Introduction</h3>
				<p>This document describes how to implement sources for Findy.</p>
				<p>Findy is a mobile app that helps users to find goods and services.
				We use term source for an integration to the specific web site.</p>
				<p>Source receives search profile, checks whether it can respond to it and
					returns array of search variants. Each search variant will be queried by
					the app one by one. On every step a search variant will make one or several
				http requests, parse response and return formatted items.</p>
				<p>Typical source is a folder (node module) that contains following files</p>
				<ul>
					<li>index.ts - orchestrates execution, for most sources it&#39;s content is the same,
					the only thing you have to change is the source name.</li>
					<li>mapping.ts - converts search profile to an array of search variants.
					See <a href="/modules/mapping.html#spectovariants">M.specToVariants()</a>.</li>
					<li>parseData.ts - parses response to internal data structure. See
						<a href="/modules/parse.html#parsehtml">P.parseHTML()</a> and
					<a href="/modules/parse.html#parsejson">P.parseJSON()</a>.</li>
				</ul>
				<h3 id="setting-up">Setting up</h3>
				<h4 id="node">Node</h4>
				<p>Node is required to run development tools.</p>
				<p>Make sure that installed Node version is 10.6.0 or newer and npm version is 6.1.0 or newer.</p>
				<p>For macOS or linux we recommended to install it with help of <a href="http://nvm.sh/">nvm</a>.</p>
				<p>For Windows recommended way is to use Windows Installer from <a href="https://nodejs.org/en/download/current/">official download page</a></p>
				<h4 id="private-npm-access">Private NPM access</h4>
				<p>You will receive credentials to access private npm repository from the repository administrator.
				Ones you have it, run following command and enter your credentials.</p>
				<pre><code>npm adduser <span class="hljs-attribute">--registry</span>=https://npm.findy.com <span class="hljs-attribute">--scope</span>=@findy-sources</code></pre><h4 id="workspace-generation-and-start">Workspace generation and start</h4>
				<p>When it&#39;s done, generate workspace with following command</p>
				<pre><code>npx -p @findy-sources/<span class="hljs-keyword">generate</span> <span class="hljs-keyword">generate</span></code></pre><p>It will create folder named <code>findy-sources-workspace</code> with node project inside it and show instructions to follow.</p>
				<p>Go to workspace and run</p>
				<pre><code><span class="hljs-built_in">npm</span> install
<span class="hljs-built_in">npm</span> run dev</code></pre><p>It will compile module in a watch mode and start instruments:</p>
				<p>Main Tool on <a href="http://localhost:3000/">http://localhost:3000/</a></p>
				<p>Documentation server on <a href="http://localhost:8095/">http://localhost:8095/</a></p>
				<p>Statistics viewer on <a href="http://localhost:8090/">http://localhost:8090/</a></p>
				<h3 id="source-implementation">Source implementation</h3>
				<p>Determine to which categories and profiles source could respond. List of
					categories and profile types can be found in documentation for
				<a href="/interfaces/meta.categorytoprofilemap.html">CategoryToProfileMap</a>.</p>
				<p>Follow the guide to check if source can be implemented
					<a href="https://docs.google.com/document/d/1Jsvz5GHFACRea4BIWJXJNTk9Ka6BKBOukcYIBxx7vik/edit">https://docs.google.com/document/d/1Jsvz5GHFACRea4BIWJXJNTk9Ka6BKBOukcYIBxx7vik/edit</a>
				It&#39;s written for auto search, but ideas apply to other categories.</p>
				<p>Once you make sure that source is feasible to implement, generate source
				in the workspace with command</p>
				<pre><code>npm <span class="hljs-keyword">run</span><span class="bash"> create &lt;<span class="hljs-built_in">source</span>-name&gt;</span></code></pre><p>Where <source-name> is the name of the site you are going to work on. One
					word, do not use punctuation. Command will create source folder inside
				<code>src/</code> and put some example code there.</p>
				<p>You can have more then one source in workspace and develop them in the
				same time.</p>
				<p>Once source stub is generated, start adapting the code to your web site
				while checking how it works with the Tool.</p>
				<p>If it works more or less, you can start checking it with statistical
				tests.</p>
				<p>:TODO: describe how to ship completed source</p>
				<h3 id="the-tool">The Tool</h3>
				<p>Will run on <a href="http://localhost:3000/">http://localhost:3000/</a></p>
				<p>On the left side there are fixture selector and profile area.</p>
				<p>Use fixture selector to choose sample profile (try to type iphone) and
					profile will fill in. You are free to put profile manually, fixtures are
				just some predefined samples that are used in statistical tests.</p>
				<p>On every profile change Tool sends this profile to the sources and if some
					of them support it, buttons will appear. One button per search variant.
					If buttons does not show up when they are expected, try to hit debug mapping
				button for hints in the browser console.</p>
				<h4 id="manual-requests">Manual requests</h4>
				<p>If you need to debug some requests, there is a way to do it from the Tool.
					When Tool is running, open chrome dev tools console and run request function
				from there.</p>
				<pre><code><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> request({ _origin: <span class="hljs-string">'http://example.com'</span> })</code></pre><h3 id="statistics-viewer">Statistics Viewer</h3>
				<p>Will run on <a href="http://localhost:8090/">http://localhost:8090/</a></p>
				<p>:TODO:</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/location_helpers.html">location-<wbr>helpers</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/mapping.html">mapping</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/meta.html">meta</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/parse.html">parse</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/util.html">util</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>