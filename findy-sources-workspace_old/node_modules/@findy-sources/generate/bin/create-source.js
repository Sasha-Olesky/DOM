#!/usr/bin/env node

const fs = require('fs-extra')
const path = require('path')
const chalk = require('chalk')
const replace = require('replace-in-file')

if (process.argv[2]) {
  const sourceName = process.argv[2]
  const targetPath = path.join(process.cwd(), 'src', sourceName)

  fs.copySync(
    path.join(__dirname, '..', 'templates', 'product'),
    targetPath
  )

  replace.sync({
    files: `${targetPath}/**/*.ts`,
    from: '%SOURCE_NAME%',
    to: sourceName
  })

  console.log(`
Source ${chalk.blue(sourceName)} was created, to implement it edit code in:
${chalk.blue(targetPath)}
`)
} else {
  console.log(`Put the source domain name as a command line option, i.e:`)
  console.log(chalk.blue('npm run create autotrader.ru'))
}
